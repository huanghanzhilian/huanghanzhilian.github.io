<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>JavaScript创建对象</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" type="text/css" href="/assets/css/main.css">
	<link rel="stylesheet" type="text/css" href="/assets/css/public.css">
	<link rel="stylesheet" type="text/css" href="/assets/css/style.css">
	<!-- <link rel="stylesheet" type="text/css" href="/assets/css/pygments.css"> -->
	<link rel="shortcut icon" href="/assets/images/logo_ioc.ico" type="images/x-icon"/>
	<link rel="icon" href="/assets/images/logo_ioc.png" type="images/png"/>
	<script src="http://libs.baidu.com/jquery/1.9.0/jquery.js" type="text/javascript"></script>
	
	<script type="text/javascript">
	    (function($) {

	    	var temp = 0;
	    	$(document).scroll(function() {

	    		if ($(document).scrollTop() > temp) {
	    			$("#header").addClass("hide-top");
	    		} else {
	    			$("#header").removeClass("hide-top");
	    		}
	    		temp = $(document).scrollTop();
	    	});
	    	
	    	//console.log($(".menu"))
	    })(jQuery);

	</script>

</head>
<body>
    <header id="header" role="banner">
	<a id="hgroup" href="/" rel="home">
		<h1 id="logo"></h1>
		<i class="slogan" title="返回首页">
			热爱编程，关注前端开发技术
		</i>
	</a>
	<div class="connect">
		<a href="https://github.com/huanghanzhilian" class="git" target="_blank"></a>
		<a href="http://www.huanghanlian.com/feed.xml" class="rss"></a>
	</div>
	<nav id="nav">
		<ul class="menu">
			<li class="menu_item">
				<a href="/">首页</a>
			</li>
			<li class="menu_item">
				<a href="http://www.huanghanlian.com/widget/">Web组件库</a>
			</li>
			<li class="menu_item">
				<a href="http://www.huanghanlian.com/front-end-note/">前端笔记</a>
			</li>
			<li class="menu_item">
				<a href="/about/">关于本站</a>
			</li>
			<li class="menu_item">
				<a href="/report/">留言板</a>
			</li>
		</ul>
	</nav>

	<div id="m-btns">
		<div class="menu"></div>
	</div>
	<nav class="nav-bar-tabs ">
		<ul>
            <li>
              	<a href="/">首页</a>
            </li>
            <li>
              	<a href="http://www.huanghanlian.com/widget/">Web组件库</a>
            </li>
            <li>
              	<a href="http://www.huanghanlian.com/front-end-note/">前端笔记</a>
            </li>
            <li>
              	<a href="/about/">关于本站</a>
            </li>
            <li>
              	<a href="/report/">留言板</a>
            </li>
        </ul>
	</nav>
</header>
	<div id="container" class="clearfix">
	<main id="main" class="hfeed">
		<article id="post-157" class="post-157 hentry">
			<header class="entry-header">
				<h1 class="entry-title">JavaScript创建对象</h1>
				<div class="entry-meta">2016-12-05 <span class="dot">•</span>JavaScript<span class="dot">•</span>黄继鹏<span id="busuanzi_container_page_pv">  |  阅读量 <span id="busuanzi_value_page_pv"></span> 次</span></div>
			</header>
			<article class="post-content">
              <p>JavaScript 有Date、Array、String等这样的内置对象，功能强大使用简单，人见人爱，但在处理一些复杂的逻辑的时候，内置对象就很无力了，往往需要开发者自定义对象。</p>

<h4>对象是什么</h4>

<p>从JavaScript定义上讲对象是无序属性的集合，其属性可以包含基本值、对象或函数。也就是说对象是一组没有特定顺序的属性，每个属性会映射到一个值上，是一组键值对，值可以是数据或对象。</p>

<h4>最简单的对象</h4>

<p>JavaScript的一对花括号{}就可以定义一个对象，这样的写法实际上和调用Object的构造函数一样</p>
<div class="highlight"><pre><code class="language-" data-lang="">var obj={};
var obj2=new Object();
</code></pre></div>
<p>这样构建出来的对象仅仅包含一个指向Object的prototype的指针，可以使用一些valueOf、hasQwnProperty等方法，没有多大实际作用，自定义对象嘛总要有一些自定义的属性、方法神马的。</p>
<div class="highlight"><pre><code class="language-" data-lang="">var bool = new Boolean(0);
document.write(bool.valueOf());
//false
</code></pre></div>
<p>JavaScript valueOf() 方法</p>
<div class="highlight"><pre><code class="language-" data-lang="">var obj = {};             //定义对象obj
obj.a = 0;                //动态赋值字符串属性a值为0
obj.fn = function() {     //动态赋值字符串属性fn值为匿名函数    属性值为函数表达式
    console.log(this);
}

var obj2 = {
    a: 0,                 //使用字面量赋值方法
    fn: function() {
        alert(this);
    }
}
</code></pre></div>
<p>可以在定义完对象后通过”.”为其添加属性和方法，也可以使用字面量赋值方法在定义对象的时候为其添加属性和方法，这样创建的对象，其方法和属性可以直接使用对象引用，类似于类的静态变量和静态函数，这样创建对象有一个明显缺陷——在定义大量对象的时候很费力，要一遍遍的写几乎是重复的代码。</p>

<h4>抽象一下</h4>

<p>既然是重复代码就可以抽象出来，用函数来做这些重复工作，在创建对象的时候调用一个专门创建对象的方法，对于不同的属性值只需要传入不同参数即可。</p>
<div class="highlight"><pre><code class="language-" data-lang="">function createObj(a, fn) {              //函数声明  带有参数
    var obj = {};                        //定义对象obj  局部变量
    obj.a = a;                           //动态赋值字符串属性a值为穿参a
    obj.fn = fn;                         //动态赋值字符串属性fn值为穿参fn
    return obj;                          //函数返回obj对象
}

var obj = createObj(2, function() {      //声明obj变量值为createObj函数再传参  obj等于createObj返回的obj对象
    alert(this.a);
});
</code></pre></div>
<p>这样在创建大量对象的时候，就可以通过调用此方法来做一些重复工作了，这种方式也不完美，因为在很多时候需要判断对象的类型，上面代码创建出来的对象都是最原始的Object对象实例，只是拓展了一些属性和方法。</p>

<h4>有型一些</h4>

<p>又是function登场的时候，JavaScript中function就是个对象，在创建对象的时候打可以抛开上面createObj方法，直接使用function作为对象，怎么实现复用呢，这就在于function作为对象的特殊性了。</p>

<ol>
<li><p>function可以接受参数，可以根据参数来创建相同类型不同值的对象</p></li>
<li><p>function作为构造函数（通过new操作符调用）的时候会返回一个对象<br>
构造函数的返回值分为两种情况，当function没有return语句或者return回一个基本类型（bool,int,string,undefined,null）的时候，返回new创建的一个匿名对象，该对象即为函数实例；如果function体内return一个引用类型对象（Array,Function,Object等）时，该对象会覆盖new创建的匿名对象作为返回值。</p></li>
<li><p>那么使用function怎么解决类型识别问题呢，每个function实例对象都会有一个constructor属性（也不是“有”，而是可以对应），这个属性就可以指示其构造是谁，也可以使用instanceof 操作符来做判断对象是否为XXX的实例。</p>

<p>function Person(name) {                                  //函数声明  带有参数
    this.name = name;                                    //this指向函数本身this.name等于传参
    this.fn = function() {                               //this.fn等于函数表达式
        alert(this.name);                                //弹窗this.name属性值
    }
}</p>

<p>var person1 = new Person(&#39;Byron&#39;);                       //通过new操作符调用  new创建的一个匿名对象</p>

<p>console.log(person1)
console.log(person1.constructor == Person); //true       //每个function实例对象都会有一个constructor属性  这个属性就可以指示其构造是谁
console.log(person1 instanceof Person); //true           //通过instanceof判断对象类型   是否为Person的实例。</p></li>
</ol>

<p>这样就完美了吧，也不是！虽然构造函数可以使对象有型，但对象的每个实例中的方法都要重复一遍！</p>
<div class="highlight"><pre><code class="language-" data-lang="">function Person(name) {
    this.name = name;
    this.fn = function() {
        alert(this.name);
    }
}

var person1 = new Person('Byron');
var person2 = new Person('Frank');

console.log(person1.fn == person2.fn); //false
</code></pre></div>
<p>看看看，虽然两个实例的fn一模一样，但是却不是一回事儿，这如果一个function对象有一千个方法，那么它的每个实例都要包含这些方法的copy，很让内存无语啊。</p>

<h4>来个实例</h4>

<p>究竟有没有一种近乎完美的构造对象的方式，及不用做重复工作，又有型，对象通用方法又不必重复？其实可以发现使用function已经距离要求和接近了，只差那么一点儿——需要一个所有function对象的实例共享的容器，在这个容器内存发实例需要共享的属性和方法，正好这个容器是现成的——prototype原型</p>
<div class="highlight"><pre><code class="language-" data-lang="">function Person(name) {
    this.name = name;
}

Person.prototype.share = [];

Person.prototype.printName = function() {
    alert(this.name);
}

var person1 = new Person('Byron');
var person2 = new Person('Frank');

console.log(person1.printName == person2.printName); //true
</code></pre></div>
<p>这样每个Person的实例都有自己的属性name，又有所有实例共享的属性share和方法printName，基本问题都解决了，对于一般的对象处理就可以始终这个有型又有爱的创建对象模式了。</p>

              <!-- 多说评论框 start -->
              		<!-- <span class="ds-thread-count" data-thread-key="/javascript/2016/12/05/javascript_cjdx" data-count-type="comments"></span> -->
					<div class="ds-thread" data-thread-key="http://www.huanghanlian.com/javascript/2016/12/05/javascript_cjdx" data-title="JavaScript创建对象" data-url="http://www.huanghanlian.com/javascript/2016/12/05/javascript_cjdx"></div>
				<!-- 多说评论框 end -->
				<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
				<script type="text/javascript">
				var duoshuoQuery = {short_name:"huanghuanlian"};
					(function() {
						var ds = document.createElement('script');
						ds.type = 'text/javascript';ds.async = true;
						ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
						ds.charset = 'UTF-8';
						(document.getElementsByTagName('head')[0]
						 || document.getElementsByTagName('body')[0]).appendChild(ds);
					})();
				</script>
				<!-- 多说公共JS代码 end -->


				
            </article>
		</article>

	</main>
	<div class="sidebar" id="sidebar">
	<div class="sidebar-top">
		<aside class="widjhuh">
			<h3 class="widget-title">最新文章</h3>
			<ul class="minty_thumblist">
				
                  <li>
                    <a href="/angularjs/2017/03/11/angularjs-basics10.html">

                    	<span>基本概念和用法-综合应用BookStore  2-8</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/angularjs/2017/03/11/angularjs-basics9.html">

                    	<span>基本概念和用法-Service与Peovider  2-7</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/angularjs/2017/03/11/angularjs-basics8.html">

                    	<span>基本概念和用法-指令 2-6</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/angularjs/2017/03/11/angularjs-basics7.html">

                    	<span>基本概念和用法-路由 2-5</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/angularjs/2017/03/11/angularjs-basics6.html">

                    	<span>基本概念和用法-双向数据绑定 2-4</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/angularjs/2017/03/11/angularjs-basics5.html">

                    	<span>基本概念和用法-路由，模块，依赖注入 2-3</span>
                    </a>
                  </li>
				
			</ul>
		</aside>
	</div>

	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">最近访客</h3>
			<ul class="minty_thumblist minty_thumblist_a ds-recent-visitors visitorsopi" data-num-items="20" data-avatar-size="38">

			</ul>

		    <!--多说js加载开始，一个页面只需要加载一次 -->
		    <script type="text/javascript">
		    var duoshuoQuery = {short_name:"huanghuanlian"};
		    (function() {
		        var ds = document.createElement('script');
		        ds.type = 'text/javascript';ds.async = true;
		        ds.src = 'http://static.duoshuo.com/embed.js';
		        ds.charset = 'UTF-8';
		        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
		    })();
		    </script>
		    <!--多说js加载结束，一个页面只需要加载一次 -->

		</aside>
	</div>

	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">分类目录</h3>
			<ul class="minty_thumblist minty_thumblist_a">
				
				<li>
					<a href="/categories/Markdown/" title="view all
posts">
						Markdown (2)
					</a>
				</li>
				
				<li>
					<a href="/categories/Canvas/" title="view all
posts">
						Canvas (1)
					</a>
				</li>
				
				<li>
					<a href="/categories/Git/" title="view all
posts">
						Git (1)
					</a>
				</li>
				
				<li>
					<a href="/categories/JavaScript/" title="view all
posts">
						JavaScript (30)
					</a>
				</li>
				
				<li>
					<a href="/categories/AngularJS/" title="view all
posts">
						AngularJS (10)
					</a>
				</li>
				
			</ul>
		</aside>
	</div>


	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">标签目录</h3>
			<div class="tagcloud" id="tagcloud">
				
					<a href="/tag/Markdown/" title="view all
posts">
						Markdown
					</a>
				
					<a href="/tag/Canvas/" title="view all
posts">
						Canvas
					</a>
				
					<a href="/tag/Git/" title="view all
posts">
						Git
					</a>
				
					<a href="/tag/JavaScript/" title="view all
posts">
						JavaScript
					</a>
				
					<a href="/tag/RegExp/" title="view all
posts">
						RegExp
					</a>
				
					<a href="/tag/DOM/" title="view all
posts">
						DOM
					</a>
				
					<a href="/tag/BOM/" title="view all
posts">
						BOM
					</a>
				
					<a href="/tag/proto/" title="view all
posts">
						proto
					</a>
				
					<a href="/tag/Ajax/" title="view all
posts">
						Ajax
					</a>
				
					<a href="/tag/AngularJS/" title="view all
posts">
						AngularJS
					</a>
				
			</div>

		</aside>
	</div>

	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">友情链接</h3>
			<ul class="minty_thumblist minty_thumblist_a">

				<li>
					<a href="http://blog.csdn.net/u013861109?viewmode=contents" target="blank">
						csdn博客
					</a>
				</li>
				<li>
					<a href="http://www.imooc.com/" target="blank">
						慕课网
					</a>
				</li>
				<li>
					<a href="http://www.dglives.com/" target="blank">
						数字生活前端
					</a>
				</li>
				<li>
					<a href="http://www.jianshu.com/" target="blank">
						简书
					</a>
				</li>
				<li>
					<a href="http://www.runoob.com/" target="blank">
						菜鸟
					</a>
				</li>
				<li>
					<a href="http://www.qdfuns.com/" target="blank">
						前端网
					</a>
				</li>
			</ul>
		</aside>
	</div>

	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">QQ交流群</h3>
			<img style="margin-top: 10px; box-shadow: none;" src="/assets/images/ertw.png">
		</aside>
	</div>


	<script>
	var box=document.getElementById("tagcloud").getElementsByTagName("a");
	for(var i=0;i<box.length;i++){
		var a =Math.round(Math.random()*20)/10;
		box[i].style.fontSize=a+'em';
	}
	</script>

</div>
</div>
	
<footer id="footer">
	<nav class="links">
		<a href="">作品</a>
		<a href="/about/">关于本站</a>
		<a href="/report/">留言板</a>
	</nav>
	<div class="copyright">
		© 2016 <a href="">继小鹏的前端博客</a>
	</div>
	<a href="javascript:pageScroll();" id="rocket" class=""></a>
	<span id="busuanzi_container_site_pv">
	    本站总访问量<span id="busuanzi_value_site_pv"></span>次
	</span>
	<span id="busuanzi_container_site_uv">
	  本站访客数<span id="busuanzi_value_site_uv"></span>人次
	</span>
</footer>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script>

$(function(){
	$("#m-btns").click(function(){
		if($("body").hasClass('nav-is-open')){
			$("body").removeClass('nav-is-open')
		}else{
			$("body").addClass('nav-is-open')
		};
	})
})
var fhdb = document.getElementById("rocket");

//获取页面可视区高度
var dqy = document.documentElement.clientHeight;

var main_left=$('#main').offset().left+$('#main').width()+16;

//滚动条滚动时触发   在滚动的时候触发
window.onscroll = function() {
	var sTop = document.documentElement.scrollTop || document.body.scrollTop;
	if (sTop >= dqy) {
		$("#rocket").addClass('show');
	} else {
		$("#rocket").removeClass('show');
	}
}

function pageScroll() {
	//把内容滚动指定的像素数（第一个参数是向右滚动的像素数，第二个参数是向下滚动的像素数）
	window.scrollBy(0, -100);
	//延时递归调用，模拟滚动向上效果
	scrolldelay = setTimeout('pageScroll()', 5);
	//获取scrollTop值，声明了DTD的标准网页取document.documentElement.scrollTop，否则取document.body.scrollTop；因为二者只有一个会生效，另一个就恒为0，所以取和值可以得到网页的真正的scrollTop值
	var sTop = document.documentElement.scrollTop + document.body.scrollTop;
	//判断当页面到达顶部，取消延时代码（否则页面滚动到顶部会无法再向下正常浏览页面）
	if (sTop == 0) clearTimeout(scrolldelay)

}



</script>
</body>
</html>