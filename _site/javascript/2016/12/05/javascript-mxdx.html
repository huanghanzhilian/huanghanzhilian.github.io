<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>JavaScript面向对象</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" type="text/css" href="/assets/css/main.css">
	<link rel="stylesheet" type="text/css" href="/assets/css/public.css">
	<link rel="stylesheet" type="text/css" href="/assets/css/style.css">
	<link rel="stylesheet" type="text/css" href="/assets/css/pygments.css">
	<link rel="shortcut icon" href="/assets/images/logo_ioc.ico" type="images/x-icon"/>
	<link rel="icon" href="/assets/images/logo_ioc.png" type="images/png"/>
	<script src="http://libs.baidu.com/jquery/1.9.0/jquery.js" type="text/javascript"></script>
	<script type="text/javascript">
	    (function($) {

	    	var temp = 0;
	    	$(document).scroll(function() {

	    		if ($(document).scrollTop() > temp) {
	    			$("#header").addClass("hide-top");
	    		} else {
	    			$("#header").removeClass("hide-top");
	    		}
	    		temp = $(document).scrollTop();
	    	});
	    })(jQuery);

	</script>

</head>
<body>
    <header id="header" role="banner">
	<a id="hgroup" href="/" rel="home">
		<h1 id="logo"></h1>
		<i class="slogan" title="返回首页">
			热爱编程，关注前端开发技术
		</i>
	</a>
	<div class="connect">
		<a href="" class="rss"></a>
	</div>
	<nav id="nav">
		<ul class="menu">
			<li class="menu_item">
				<a href="/">首页</a>
			</li>
			<li class="menu_item">
				<a href="/about/">关于本站</a>
			</li>
			<li class="menu_item">
				<a href="/report/">留言板</a>
			</li>
		</ul>
	</nav>
	<div id="m-btns">
		<div class="menu"></div>
	</div>
</header>
	<div id="container" class="clearfix">
	<main id="main" class="hfeed">
		<article id="post-157" class="post-157 hentry">
			<header class="entry-header">
				<h1 class="entry-title">JavaScript面向对象</h1>
				<div class="entry-meta">2016-12-05 <span class="dot">•</span>JavaScript<span class="dot">•</span>黄继鹏</div>
			</header>
			<article class="post-content">
              <p>对象这个词如雷贯耳，同样出名的一句话：XXX语言中一切皆为对象！</p>

<p>对象究竟是什么？什么叫面向对象编程？</p>

<h4 id="section">理解对象</h4>

<blockquote>
  <p>对象（object），台湾译作物件，是面向对象（Object Oriented）中的术语，既表示客观世界问题空间（Namespace）中的某个具体的事物，又表示软件系统解空间中的基本元素。</p>
</blockquote>

<blockquote>
  <p>在软件系统中，对象具有唯一的标识符，对象包括属性（Properties）和方法（Methods），属性就是需要记忆的信息，方法就是对象能够提供的服务。在面向对象（Object Oriented）的软件中，对象（Object）是某一个类（Class）的实例（Instance）。 —— 维基百科</p>
</blockquote>

<p>对象是从我们现实生活中抽象出来的一个概念，俗话说物以类聚，人以群分，我们也经常说有一类人，他们专业给隔壁家制造惊喜，也就是我们说的老王</p>

<p>这里面就有两个重要概念</p>

<ol>
  <li>类：无论是物以类聚，还是有一类人，这里说的类并不是实际存在的事物，是一些特征、是一些规则等</li>
  <li>老王：这是个实物，是现实存在，和类的关系就是符合类的描述</li>
</ol>

<p>对应到计算机术语，类就是class，定义了一些特点（属性 property）和行为（方法 method），比如说给隔壁制造惊喜的这类人有几个特征</p>

<ol>
  <li>长相文质彬彬，为人和善</li>
  <li>姓王</li>
</ol>

<p>同时这些人还有技能（行为）</p>

<ol>
  <li>帮隔壁修下水道</li>
  <li>亲切问候对方儿子</li>
</ol>

<p>我们刚才就描述了一个类，用代码表示就是</p>

<pre><code>class LaoWang {
	string name;
	string familyNmae = "wang";
	bool isKind = true;

	LaoWang(string name) {
		this.name = name;
	}

	void fixPipe() {
		statement
	}

	void greetSon() {
		statement
	}
}
</code></pre>

<p>符合这些特点并且有上述行为能力的，我们称之为老王，从描述我们就可以看出来<code>LaoWang</code>
不是指某个人，而是指一类人，符合上述描述的都可能是老王！用计算机术语说就是没个活蹦乱跳的老王都是类<code>LaoWang</code>的<strong>实例</strong>。用代码描述就是</p>

<pre><code>LaoWang lw1 = new LaoWang("yi");
LaoWang lw2 = new LaoWang("er");
...
LaoWang lw1000000 = new LaoWang("baiwan");
</code></pre>

<p>可以看出我们能够根据类<code>LaoWang</code>实例化出成千百万个老王来，老王不是一个人在战斗！</p>

<h4 id="section-1">封装</h4>

<p>刚才我们说的已经涉及到了对象的一个重要特性——封装</p>

<p>以前我们可能会有这样的描述</p>

<pre><code>王一长相文质彬彬，为人和善，姓王，有技能帮隔壁修下水道、亲切问候对方儿子
王二长相文质彬彬，为人和善，姓王，有技能帮隔壁修下水道、亲切问候对方儿子
王三长相文质彬彬，为人和善，姓王，有技能帮隔壁修下水道、亲切问候对方儿子
王四长相文质彬彬，为人和善，姓王，有技能帮隔壁修下水道、亲切问候对方儿子
...
王百万长相文质彬彬，为人和善，姓王，有技能帮隔壁修下水道、亲切问候对方儿子
</code></pre>

<p>有了对象的思想我们可以这样说了，首先定义一类人</p>

<pre><code>有那么一类人

1. 长相文质彬彬，为人和善
2. 姓王

同时这些人还有技能（行为）

1. 帮隔壁修下水道
2. 亲切问候对方儿子
</code></pre>

<p>然后是实例化，也就是对号入座</p>

<pre><code>王一是老王
王二是老王
...
王百万是老王
</code></pre>

<p>也就是我们通过类来描述一套规则，其中包括</p>

<ol>
  <li>属性</li>
  <li>行为</li>
</ol>

<p>对于这个类实例化出的对象，也就是副歌这个类描述的对象，不用去关心对象细节，我们认为符合类的描述，就会有类规定的属性和方法，至于每个方法具体实现细节不去关注，比如老王怎么给人修水管，我知道他有修水管的技能，然后用的时候让他去修就好了（只要不修我家的）</p>

<p>我们称这种隐藏细节的特征叫做封装</p>

<h4 id="javascript-">JavaScript 对象</h4>

<p>因为JavaScript是基于原型（prototype）的，没有类的概念（ES6有了，这个暂且不谈），我们能接触到的都是对象，真正做到了一切皆为对象</p>

<p>所以我们再说对象就有些模糊了，很多同学会搞混类型的对象和对象本身这个概念，我们在接下来的术语中不提对象，我们使用和Java类似的方式，方便理解</p>

<pre><code>function People(name) {
	this.name = name;

	this.printName = function() {
		console.log(name);
	};
}
</code></pre>

<p>这是一个函数，也是对象，我们称之为<code>类</code></p>

<pre><code>var p1 = new People('Byron');
</code></pre>

<p>p1是People类new出来的对象，我们称之为<code>实例</code></p>

<p>类和实例的关系用我们码农的专业眼光看起来是这样的</p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-00ea0df05798f4bf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png" /></p>

<p>类就是搬砖的模具，实例就是根据模具印出来的砖块，一个模具可以印出（实例化）多个实例，每个实例都符合类的特征，这个例子和我们JavaScript中概念很像</p>

<p>在Java中<strong>类</strong>不能称之为对象，如同<code>老王</code>
是一个概念、规则的集合，但是在JavaScript中，本身没有类的概念，我们需要用对象模拟出类，然后用类去创建对象</p>

<p>我们的例子中模具虽然是<strong>“类”</strong>，但同时也是个存在的实物，是个对象，我们为了方便理解，称之为<code>类</code></p>

<h4 id="object">Object</h4>

<p>我们知道JavaScript有<code>null</code>、<code>undefined</code>、<code>number</code>、<code>boolean</code>、<code>string</code>五种简单类型，<code>null</code>和<code>undefined</code>分别表示没有声明和声明后没有初始化的变量、对象，是两个简单的值，其余三个有对应的包装对象<code>Number</code>、<code>Boolean</code>、<code>String</code></p>

<p>其它的就都是<code>object</code>类型了，比如常用的<code>Array</code>、<code>Date</code>、<code>RegExp</code>等，我们最常用的<code>Function</code>也是个对象，虽然</p>

<pre><code>typeof function(){}; // "function"
</code></pre>

<p>但是Function实例和其它类型的实例没有什么区别，都是对象，只不过<code>typeof</code>操作符对其做了特殊处理</p>

<p>在JavaScript中使用对象很简单，使用new操作符执行<code>Obejct</code>函数就可以构建一个最基本的对象</p>

<pre><code>var obj = new Object();
</code></pre>

<p>我们称new 调用的函数为构造函数，构造函数和普通函数区别仅仅在于是否使用了<code>new</code>来调用，它们的返回值也会不同</p>

<p>所谓“构造函数”，就是专门用来生成“对象”的函数。它提供模板，作为对象的基本结构。一个构造函数，可以生成多个对象，这些对象都有相同的结构</p>

<p>我们可以通过<code>.</code>来位对象添加属性和方法</p>

<pre><code>obj.name = 'Byron';
obj.printName = function(){
    console.log(obj.name);
};
</code></pre>

<p>这么写比较麻烦，我们可以使用字面量来创建一个对象，下面的写法和上面等价</p>

<pre><code>var obj = {
	name: 'Byron',
	printNmae: function() {
		console.log(obj.name);
	}
}
</code></pre>

<h4 id="section-2">构造对象</h4>

<p>我们可以抛开类，使用字面量来构造一个对象</p>

<pre><code>var obj1 = {
	nick: 'Byron',
	age: 20,
	printName: function() {
		console.log(obj1.nick);
	}
}
var obj2 = {
	nick: 'Casper',
	age: 25,
	printName: function() {
		console.log(obj2.nick);
	}
}
</code></pre>

<p><strong>问题</strong></p>

<p>这样构造有两个明显问题</p>

<ol>
  <li>太麻烦了，每次构建一个对象都是复制一遍代码</li>
  <li>如果想个性化，只能通过手工赋值，使用者必需了解对象详细</li>
</ol>

<p>这两个问题其实也是我们不能抛开类的重要原因，也是类的作用</p>

<h4 id="section-3">使用函数做自动化</h4>

<pre><code>function createObj(nick, age) {
	var obj = {
		nick: nick,
		age: age,
		printName: function() {
			console.log(this.nick);
		}
	};
	return obj;
}

var obj3 = createObj('Byron', 30);
obj3.printName();
</code></pre>

<p>我们通过创建一个函数来实现自动创建对象的过程，至于个性化通过参数实现，开发者不必关注细节，只需要传入指定参数即可</p>

<p><strong>问题</strong></p>

<p>这种方法解决了构造过程复杂，需要了解细节的问题，但是构造出来的对象类型都是Object，没有识别度</p>

<h4 id="section-4">有型一些</h4>

<p>要想让我们构造出的函数有型一些，我们需要了解一些额外知识</p>

<ol>
  <li>
    <p>function作为构造函数（通过new操作符调用）的时候会返回一个类型为function的name的对象</p>
  </li>
  <li>
    <p>function可以接受参数，可以根据参数来创建相同类型不同值的对象</p>
  </li>
  <li>
    <p>function实例作用域内有一个constructor属性，这个属性就可以指示其构造器</p>
  </li>
</ol>

<p><strong>new</strong></p>

<p>new 运算符接受一个函数 F 及其参数：new F(arguments…)。这一过程分为三步：</p>

<ol>
  <li>
    <p>创建类的实例。这步是把一个空的对象的 <strong>proto</strong> 属性设置为 F.prototype 。</p>
  </li>
  <li>
    <p>初始化实例。函数 F 被传入参数并调用，关键字 this 被设定为该实例。</p>
  </li>
  <li>
    <p>返回实例。</p>
  </li>
</ol>

<p>根据这几个特性，我们可以改造一下创建对象的方式</p>

<pre><code>function Person(nick, age) {
	this.nick = nick;
	this.age = age;
	this.sayName = function() {
		console.log(this.nick);
	}
}
var p1 = new Person();
</code></pre>

<p><strong>instanceof</strong></p>

<p>instanceof是一个操作符，可以判断<strong>对象</strong>是否为某个类型的实例</p>

<pre><code>p1 instanceof Person; // true
p1 instanceof Object;// true
</code></pre>

<p>instanceof判断的是对象</p>

<pre><code>1 instanceof Number; // false
</code></pre>

<p><strong>问题</strong></p>

<p>构造函数在解决了上面所有问题，同时为实例带来了类型，但可以注意到每个实例printName方法实际上作用一样，但是每个实例要重复一遍，大量对象存在的时候是浪费内存</p>

<blockquote>
  <p>未完</p>
</blockquote>

              <!-- 多说评论框 start -->
              		<!-- <span class="ds-thread-count" data-thread-key="/javascript/2016/12/05/javascript_mxdx" data-count-type="comments"></span> -->
					<div class="ds-thread" data-thread-key="http://yourdomain.com/javascript/2016/12/05/javascript_mxdx" data-title="JavaScript面向对象" data-url="http://yourdomain.com/javascript/2016/12/05/javascript_mxdx"></div>
				<!-- 多说评论框 end -->
				<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
				<script type="text/javascript">
				var duoshuoQuery = {short_name:"huanghuanlian"};
					(function() {
						var ds = document.createElement('script');
						ds.type = 'text/javascript';ds.async = true;
						ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
						ds.charset = 'UTF-8';
						(document.getElementsByTagName('head')[0]
						 || document.getElementsByTagName('body')[0]).appendChild(ds);
					})();
				</script>
				<!-- 多说公共JS代码 end -->


				
            </article>
		</article>

	</main>
	<div class="sidebar" id="sidebar">
	<div class="sidebar-top">
		<aside class="widjhuh">
			<h3 class="widget-title">最新文章</h3>
			<ul class="minty_thumblist">
				
                  <li>
                    <a href="/javascript/2016/12/05/javascript-cjdx.html">

                    	<span>JavaScript创建对象</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/javascript/2016/12/05/javascript-prototype.html">

                    	<span>JavaScript prototype</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/javascript/2016/12/05/javascript-jinjie4.html">

                    	<span>JavaScript 精粹 基础 进阶(4)对象</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/javascript/2016/12/05/javascript-jinjie3.html">

                    	<span>JavaScript 精粹 基础 进阶(3)语句</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/javascript/2016/12/05/javascript-jinjie2.html">

                    	<span>JavaScript 精粹 基础 进阶(2)表达式和运算符</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/javascript/2016/12/01/javascript-jinjie.html">

                    	<span>JavaScript 精粹 基础 进阶(1)数据类型</span>
                    </a>
                  </li>
				
			</ul>
		</aside>
	</div>

	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">最近访客</h3>
			<ul class="minty_thumblist minty_thumblist_a ds-recent-visitors visitorsopi" data-num-items="20" data-avatar-size="38">

			</ul>

		    <!--多说js加载开始，一个页面只需要加载一次 -->
		    <script type="text/javascript">
		    var duoshuoQuery = {short_name:"huanghuanlian"};
		    (function() {
		        var ds = document.createElement('script');
		        ds.type = 'text/javascript';ds.async = true;
		        ds.src = 'http://static.duoshuo.com/embed.js';
		        ds.charset = 'UTF-8';
		        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
		    })();
		    </script>
		    <!--多说js加载结束，一个页面只需要加载一次 -->

		</aside>
	</div>

	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">分类目录</h3>
			<ul class="minty_thumblist minty_thumblist_a">
				
				<li>
					<a href="/categories/Markdown/" title="view all
posts">
						Markdown (2)
					</a>
				</li>
				
				<li>
					<a href="/categories/Canvas/" title="view all
posts">
						Canvas (1)
					</a>
				</li>
				
				<li>
					<a href="/categories/Git/" title="view all
posts">
						Git (1)
					</a>
				</li>
				
				<li>
					<a href="/categories/JavaScript/" title="view all
posts">
						JavaScript (7)
					</a>
				</li>
				
			</ul>
		</aside>
	</div>


	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">标签目录</h3>
			<div class="tagcloud" id="tagcloud">
				
					<a href="/tag/Markdown/" title="view all
posts">
						Markdown
					</a>
				
					<a href="/tag/Canvas/" title="view all
posts">
						Canvas
					</a>
				
					<a href="/tag/Git/" title="view all
posts">
						Git
					</a>
				
					<a href="/tag/JavaScript/" title="view all
posts">
						JavaScript
					</a>
				
			</div>

		</aside>
	</div>

	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">友情链接</h3>
			<ul class="minty_thumblist minty_thumblist_a">

				<li>
					<a href="http://blog.csdn.net/u013861109?viewmode=contents" target="blank">
						csdn博客
					</a>
				</li>
				<li>
					<a href="http://www.imooc.com/" target="blank">
						慕课网
					</a>
				</li>
				<li>
					<a href="http://www.dglives.com/" target="blank">
						数字生活前端
					</a>
				</li>
				<li>
					<a href="http://www.jianshu.com/" target="blank">
						简书
					</a>
				</li>
				<li>
					<a href="http://www.runoob.com/" target="blank">
						菜鸟
					</a>
				</li>
				<li>
					<a href="http://www.qdfuns.com/" target="blank">
						前端网
					</a>
				</li>
			</ul>
		</aside>
	</div>

	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">QQ交流群</h3>
			<img style="margin-top: 10px; box-shadow: none;" src="/assets/images/ertw.png">
		</aside>
	</div>


	<script>
	var box=document.getElementById("tagcloud").getElementsByTagName("a");
	for(var i=0;i<box.length;i++){
		var a =Math.round(Math.random()*20)/10;
		box[i].style.fontSize=a+'em';
	}
	</script>

</div>
</div>
	<footer id="footer">
	<nav class="links">
		<a href="">作品</a>
		<a href="">关于本站</a>
		<a href="">留言板</a>
	</nav>
	<div class="copyright">
		© 2016 <a href="">继小鹏的前端博客</a>
	</div>
	<a href="javascript:pageScroll();" id="rocket" class=""></a>
</footer>
<script>
var fhdb = document.getElementById("rocket");

//获取页面可视区高度
var dqy = document.documentElement.clientHeight;

var main_left=$('#main').offset().left+$('#main').width()+16;

//滚动条滚动时触发   在滚动的时候触发
window.onscroll = function() {
	var sTop = document.documentElement.scrollTop || document.body.scrollTop;
	if (sTop >= dqy) {
		$("#rocket").addClass('show');
	} else {
		$("#rocket").removeClass('show');
	}
}

function pageScroll() {
	//把内容滚动指定的像素数（第一个参数是向右滚动的像素数，第二个参数是向下滚动的像素数）
	window.scrollBy(0, -100);
	//延时递归调用，模拟滚动向上效果
	scrolldelay = setTimeout('pageScroll()', 30);
	//获取scrollTop值，声明了DTD的标准网页取document.documentElement.scrollTop，否则取document.body.scrollTop；因为二者只有一个会生效，另一个就恒为0，所以取和值可以得到网页的真正的scrollTop值
	var sTop = document.documentElement.scrollTop + document.body.scrollTop;
	//判断当页面到达顶部，取消延时代码（否则页面滚动到顶部会无法再向下正常浏览页面）
	if (sTop == 0) clearTimeout(scrolldelay)

}



</script>
</body>
</html>