<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>基本概念和用法-指令 2-6</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" type="text/css" href="/assets/css/main.css">
	<link rel="stylesheet" type="text/css" href="/assets/css/public.css">
	<link rel="stylesheet" type="text/css" href="/assets/css/style.css">
	<!-- <link rel="stylesheet" type="text/css" href="/assets/css/pygments.css"> -->
	<link rel="shortcut icon" href="/assets/images/logo_ioc.ico" type="images/x-icon"/>
	<link rel="icon" href="/assets/images/logo_ioc.png" type="images/png"/>
	<script src="http://libs.baidu.com/jquery/1.9.0/jquery.js" type="text/javascript"></script>
	
	<script type="text/javascript">
	    (function($) {

	    	var temp = 0;
	    	$(document).scroll(function() {

	    		if ($(document).scrollTop() > temp) {
	    			$("#header").addClass("hide-top");
	    		} else {
	    			$("#header").removeClass("hide-top");
	    		}
	    		temp = $(document).scrollTop();
	    	});
	    	
	    	//console.log($(".menu"))
	    })(jQuery);

	</script>

</head>
<body>
    <header id="header" role="banner">
	<a id="hgroup" href="/" rel="home">
		<h1 id="logo"></h1>
		<i class="slogan" title="返回首页">
			热爱编程，关注前端开发技术
		</i>
	</a>
	<div class="connect">
		<a href="https://github.com/huanghanzhilian" class="git" target="_blank"></a>
		<a href="http://www.huanghanlian.com/feed.xml" class="rss"></a>
	</div>
	<nav id="nav">
		<ul class="menu">
			<li class="menu_item">
				<a href="/">首页</a>
			</li>
			<li class="menu_item">
				<a href="http://www.huanghanlian.com/widget/">Web组件库</a>
			</li>
			<li class="menu_item">
				<a href="http://www.huanghanlian.com/front-end-note/">前端笔记</a>
			</li>
			<li class="menu_item">
				<a href="/about/">关于本站</a>
			</li>
			<li class="menu_item">
				<a href="/report/">留言板</a>
			</li>
		</ul>
	</nav>

	<div id="m-btns">
		<div class="menu"></div>
	</div>
	<nav class="nav-bar-tabs ">
		<ul>
            <li>
              	<a href="/">首页</a>
            </li>
            <li>
              	<a href="http://www.huanghanlian.com/widget/">Web组件库</a>
            </li>
            <li>
              	<a href="http://www.huanghanlian.com/front-end-note/">前端笔记</a>
            </li>
            <li>
              	<a href="/about/">关于本站</a>
            </li>
            <li>
              	<a href="/report/">留言板</a>
            </li>
        </ul>
	</nav>
</header>
	<div id="container" class="clearfix">
	<main id="main" class="hfeed">
		<article id="post-157" class="post-157 hentry">
			<header class="entry-header">
				<h1 class="entry-title">基本概念和用法-指令 2-6</h1>
				<div class="entry-meta">2017-03-11 <span class="dot">•</span>AngularJS<span class="dot">•</span>黄继鹏<span id="busuanzi_container_page_pv">  |  阅读量 <span id="busuanzi_value_page_pv"></span> 次</span></div>
			</header>
			<article class="post-content">
              <h3>解析最简单的指令hello：匹配模式restrict</h3>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"MyModule"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;hello&gt;&lt;/hello&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">hello</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"hello"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="c">&lt;!-- directive:hello --&gt;</span>
        <span class="nt">&lt;div&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"HelloAngular_Directive.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"MyModule"</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"hello"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span><span class="p">:</span> <span class="s1">'AEMC'</span><span class="p">,</span>
        <span class="na">template</span><span class="p">:</span> <span class="s1">'&lt;div&gt;Hi everyone!&lt;/div&gt;'</span><span class="p">,</span>
        <span class="na">replace</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><img src="http://upload-images.jianshu.io/upload_images/3877962-aeca8e4842100d37.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>

<p><strong>restrict</strong>表示匹配模式</p>

<p>A表示属性
E表示元素
M表示注释
C表示样式类</p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-2e1b8c9033ab7db2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>

<h3>解析最简单的指令hello：template，templateUrl，$templateCache</h3>

<p>在上面最简单的指令里面有一个配置项<strong>template</strong>这是最总要显示的html标签</p>

<p>使用这种方式编写的内容比较少，</p>

<p>AngularJS提供了<strong>templateUrl</strong>配置项，使用这个就不需要把模板写道js代码里面</p>

<p>把模板切成独立的html去编写，可以编写很多内容。</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"MyModule"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"css/bootstrap-3.0.0/css/bootstrap.css"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;hello&gt;&lt;/hello&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"templateUrl.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"MyModule"</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"hello"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span><span class="p">:</span> <span class="s1">'AECM'</span><span class="p">,</span>
        <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'hello.html'</span><span class="p">,</span>
        <span class="na">replace</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>hello
```html
<div class="panel panel-primary">
    <div class="panel-heading">
        <div class="panel-title">双向数据绑定</div>
    </div>
    <div class="panel-body">
        <div class="row">
            <div class="col-md-12">
                <form class="form-horizontal" role="form" ng-controller="UserInfoCtrl">
                    <div class="form-group">
                        <label class="col-md-2 control-label">
                            邮箱：
                        </label>
                        <div class="col-md-10">
                            <input type="email" class="form-control" placeholder="推荐使用126邮箱" ng-model="userInfo.email">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">
                            密码：
                        </label>
                        <div class="col-md-10">
                            <input type="password" class="form-control" placeholder="只能是数字、字母、下划线" ng-model="userInfo.password">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-offset-2 col-md-10">
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" ng-model="userInfo.autoLogin">自动登录
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-offset-2 col-md-10">
                            <button class="btn btn-default" ng-click="getFormData()">获取Form表单的值</button>
                            <button class="btn btn-default" ng-click="setFormData()">设置Form表单的值</button>
                            <button class="btn btn-default" ng-click="resetForm()">重置表单</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div></p>
<div class="highlight"><pre><code class="language-" data-lang="">

![Paste_Image.png](http://upload-images.jianshu.io/upload_images/3877962-cf3c066e122727d4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)




```html
<span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"MyModule"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;hello&gt;&lt;/hello&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"$templateCache.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"MyModule"</span><span class="p">,</span> <span class="p">[]);</span>

<span class="c1">//注射器加载完所有模块时，此方法执行一次</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$templateCache</span><span class="p">){</span>
    <span class="nx">$templateCache</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"hello.html"</span><span class="p">,</span><span class="s2">"&lt;div&gt;Hello everyone!!!!!!&lt;/div&gt;"</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"hello"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$templateCache</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span><span class="p">:</span> <span class="s1">'AECM'</span><span class="p">,</span>
        <span class="na">template</span><span class="p">:</span> <span class="nx">$templateCache</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"hello.html"</span><span class="p">),</span>
        <span class="na">replace</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">});</span>

</code></pre></div>
<p><strong>$templateCache</strong>这个配置项是缓存的意思。</p>

<p><code>template: $templateCache.get(&quot;hello.html&quot;),</code>就可以使用</p>

<p>也就是说将模板缓存起来去让多个指令去使用他</p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-1f01cdf23ded59fb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>

<h3>解析最简单的指令hello：replace与trabsclude</h3>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"MyModule"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;hello&gt;</span>
            <span class="nt">&lt;div&gt;</span>这里是指令内部的内容。<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/hello&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"replace.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"MyModule"</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"hello"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span><span class="p">:</span><span class="s2">"AE"</span><span class="p">,</span>
        <span class="na">template</span><span class="p">:</span><span class="s2">"&lt;div&gt;Hello everyone!&lt;/div&gt;"</span><span class="p">,</span>
        <span class="na">replace</span><span class="p">:</span><span class="kc">true</span>
    <span class="p">}</span> 
<span class="p">});</span>
</code></pre></div>
<p>hello作为一个元素当然是可以嵌套的，</p>

<p>如果使用<strong>replace</strong>配置项内部写的内容就会被替换掉，</p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-fbd8f70d905e37e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>

<p>但是有一个div</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;hello&gt;</span>
            <span class="nt">&lt;div&gt;</span>这里是指令内部的内容。<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/hello&gt;</span>
</code></pre></div>
<p>使用<strong>trabsclude</strong>方式</p>

<p><strong>trabsclude</strong>表示变换，</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"MyModule"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;hello&gt;</span>
            <span class="nt">&lt;div&gt;</span>这里是指令内部的内容。<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/hello&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"transclude.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"MyModule"</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"hello"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span><span class="p">:</span><span class="s2">"AE"</span><span class="p">,</span>
        <span class="na">transclude</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
        <span class="na">template</span><span class="p">:</span><span class="s2">"&lt;div&gt;Hello everyone!&lt;div ng-transclude&gt;&lt;/div&gt;&lt;/div&gt;"</span>
    <span class="p">}</span> 
<span class="p">});</span>
</code></pre></div>
<p><img src="http://upload-images.jianshu.io/upload_images/3877962-6b01c1ebfddecea7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>

<p>使用<strong>trabsclude</strong>内部嵌套的内容会保存下来。这个有非常重要的作用，因为指令互相之间是可以嵌套的，如果最外层的指令把内部的内容全部替换，很显然内部的指令没有办法起作用。</p>

<h3>comile与link(操作元素，添加css样式，绑定事件)</h3>

<p>指令在执行时候的机制</p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-fd90df1125c52758.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>

<h3>指令与控制器之间的交互</h3>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"MyModule"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">"MyCtrl"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;loader</span> <span class="na">howToLoad=</span><span class="s">"loadData()"</span><span class="nt">&gt;</span>滑动加载<span class="nt">&lt;/loader&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">"MyCtrl2"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;loader</span> <span class="na">howToLoad=</span><span class="s">"loadData2()"</span><span class="nt">&gt;</span>滑动加载<span class="nt">&lt;/loader&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"Directive&amp;Controller.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"MyModule"</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'MyCtrl'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">){</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">loadData</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"加载数据中..."</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}]);</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'MyCtrl2'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">){</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">loadData2</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"加载数据中...22222"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}]);</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"loader"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span><span class="p">:</span><span class="s2">"AE"</span><span class="p">,</span>
        <span class="na">link</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span><span class="nx">element</span><span class="p">,</span><span class="nx">attrs</span><span class="p">){</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">'mouseenter'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">//scope.loadData();</span>
                <span class="c1">// scope.$apply("loadData()");</span>
                <span class="c1">// 注意这里的坑，howToLoad会被转换成小写的howtoload</span>
                <span class="nx">scope</span><span class="p">.</span><span class="nx">$apply</span><span class="p">(</span><span class="nx">attrs</span><span class="p">.</span><span class="nx">howtoload</span><span class="p">);</span>
            <span class="p">});</span>
        <span class="p">}</span>
    <span class="p">}</span> 
<span class="p">});</span>
</code></pre></div>
<p>指令通过属性值的不同来调用不同控制器上的方法</p>

<p>link:function(scope,element,attrs)</p>

<p>scope作用域</p>

<p>element元素</p>

<p>attrs属性</p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-8fba9732b4eb025f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>

<h3>指令间的交互</h3>

<p>scope: {},   创建独立作用域scope</p>

<p>这里面的controller和MVC的controller不是一个东西，这个是指令内部的controller，他是用来给我们的指令暴露出一组方法给外部去调用的。</p>

<p>supermanCtrl在link中</p>

<p>controller给指令暴露了三个方法</p>

<p>指令间的交互是通过指令上面内部的<strong>controller</strong>暴露出来的方法来给外部进行调用的，</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"MyModule"</span><span class="nt">&gt;</span>

<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"css/bootstrap-3.0.0/css/bootstrap.css"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"Directive&amp;Directive.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>

<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-3"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;superman</span> <span class="na">strength</span><span class="nt">&gt;</span>动感超人---力量<span class="nt">&lt;/superman&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-3"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;superman</span> <span class="na">strength</span> <span class="na">speed</span><span class="nt">&gt;</span>动感超人2---力量+敏捷<span class="nt">&lt;/superman&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-3"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;superman</span> <span class="na">strength</span> <span class="na">speed</span> <span class="na">light</span><span class="nt">&gt;</span>动感超人3---力量+敏捷+发光<span class="nt">&lt;/superman&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span>

</code></pre></div><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"MyModule"</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"superman"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">scope</span><span class="p">:</span> <span class="p">{},</span>
        <span class="na">restrict</span><span class="p">:</span> <span class="s1">'AE'</span><span class="p">,</span>
        <span class="na">controller</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$scope</span><span class="p">.</span><span class="nx">abilities</span> <span class="o">=</span> <span class="p">[];</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">addStrength</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">$scope</span><span class="p">.</span><span class="nx">abilities</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">"strength"</span><span class="p">);</span>
            <span class="p">};</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">addSpeed</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">$scope</span><span class="p">.</span><span class="nx">abilities</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">"speed"</span><span class="p">);</span>
            <span class="p">};</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">addLight</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">$scope</span><span class="p">.</span><span class="nx">abilities</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">"light"</span><span class="p">);</span>
            <span class="p">};</span>
        <span class="p">},</span>
        <span class="na">link</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">'btn btn-primary'</span><span class="p">);</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">"mouseenter"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">abilities</span><span class="p">);</span>
            <span class="p">});</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"strength"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">require</span><span class="p">:</span> <span class="s1">'^superman'</span><span class="p">,</span>
        <span class="na">link</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">,</span> <span class="nx">supermanCtrl</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">supermanCtrl</span><span class="p">.</span><span class="nx">addStrength</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"speed"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">require</span><span class="p">:</span> <span class="s1">'^superman'</span><span class="p">,</span>
        <span class="na">link</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">,</span> <span class="nx">supermanCtrl</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">supermanCtrl</span><span class="p">.</span><span class="nx">addSpeed</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"light"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">require</span><span class="p">:</span> <span class="s1">'^superman'</span><span class="p">,</span>
        <span class="na">link</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">,</span> <span class="nx">supermanCtrl</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">supermanCtrl</span><span class="p">.</span><span class="nx">addLight</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><img src="http://upload-images.jianshu.io/upload_images/3877962-29ee8200b7aed295.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>

<h3>scope的类型与独立scope</h3>

<p><strong>什么是独立scope</strong></p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"MyModule"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"css/bootstrap-3.0.0/css/bootstrap.css"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;hello&gt;&lt;/hello&gt;</span>
        <span class="nt">&lt;hello&gt;&lt;/hello&gt;</span>
        <span class="nt">&lt;hello&gt;&lt;/hello&gt;</span>
        <span class="nt">&lt;hello&gt;&lt;/hello&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"IsolateScope.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>页面上有四个hello指令</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"MyModule"</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"hello"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span><span class="p">:</span> <span class="s1">'AE'</span><span class="p">,</span>
        <span class="na">template</span><span class="p">:</span> <span class="s1">'&lt;div&gt;&lt;input type="text" ng-model="userName"/&gt;&lt;/div&gt;'</span><span class="p">,</span>
        <span class="na">replace</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>给这个指令上面加了input
用来接收用户的输入，然后后面加了双向数据绑用来展示输入的内容，</p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-9d058b72b91d4094.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>

<p>页面上有四个input，因为这里没有给他创建独立scope会造成当我们其中一个任意input输入发生变化时，会影响其他三个指令实例。</p>

<p>这是有问题的，他们应该互相不受影响，就没有办法独立去使用了，</p>

<p>创建独立scope很简单只要加一个配置项，<code>scope:{}</code></p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"MyModule"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"css/bootstrap-3.0.0/css/bootstrap.css"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;hello&gt;&lt;/hello&gt;</span>
        <span class="nt">&lt;hello&gt;&lt;/hello&gt;</span>
        <span class="nt">&lt;hello&gt;&lt;/hello&gt;</span>
        <span class="nt">&lt;hello&gt;&lt;/hello&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"IsolateScope.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"MyModule"</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"hello"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span><span class="p">:</span> <span class="s1">'AE'</span><span class="p">,</span>
        <span class="na">scope</span><span class="p">:{},</span>
        <span class="na">template</span><span class="p">:</span> <span class="s1">'&lt;div&gt;&lt;input type="text" ng-model="userName"/&gt;&lt;/div&gt;'</span><span class="p">,</span>
        <span class="na">replace</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><img src="http://upload-images.jianshu.io/upload_images/3877962-3eee206b8ca4020a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>

<p>这个时候每个指令都有他独立的scope空间，这样他们就不会互相影响了。</p>

<h3>scope的绑定策略</h3>

<p><strong>什么是绑定策略</strong></p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-058d726680968696.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"MyModule"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"css/bootstrap-3.0.0/css/bootstrap.css"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">"MyCtrl"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;drink</span> <span class="na">flavor=</span><span class="s">""</span><span class="nt">&gt;&lt;/drink&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"ScopeAt.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>首先指令drink 有一个叫flavor一个自定义的属性，使用绑定了一个ctrlFlavor属性</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"MyModule"</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'MyCtrl'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">){</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">ctrlFlavor</span><span class="o">=</span><span class="s2">"百威"</span><span class="p">;</span>
<span class="p">}])</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"drink"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span><span class="p">:</span><span class="s1">'AE'</span><span class="p">,</span>
        <span class="na">template</span><span class="p">:</span><span class="s2">"&lt;div&gt;&lt;/div&gt;"</span><span class="p">,</span>
        <span class="na">link</span><span class="p">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span><span class="nx">element</span><span class="p">,</span><span class="nx">attrs</span><span class="p">){</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">flavor</span><span class="o">=</span><span class="nx">attrs</span><span class="p">.</span><span class="nx">flavor</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>定义控制器上面赋值一个属性ctrlFlavor值是百威</p>

<p>定义指令drink</p>

<p>template模板用来显示内容</p>

<p>link函数里面把指令属性flavor的值赋给scope里flavor属性</p>

<p>实际上template模板用来显示内容是来自于scope上面的flavor属性</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">ng</span><span class="o">-</span><span class="nx">controller</span><span class="o">=</span><span class="s2">"MyCtrl"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">drink</span> <span class="nx">flavor</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;&lt;</span><span class="sr">/drink</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span></code></pre></div>
<p>由于在指令用的这个地方把flavor绑定到了控制器里面的ctrlFlavor上面所以指令里面显示的应该是百威。</p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-6e4b26e6840fb3ac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>

<p>这样的写法如果每次都这样写会比较累，实际上可以通过<code>scope:{flavor:&#39;@&#39;}</code>这样的方式去写，link函数部分就可以不需要了。</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"MyModule"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"css/bootstrap-3.0.0/css/bootstrap.css"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">"MyCtrl"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;drink</span> <span class="na">flavor=</span><span class="s">""</span><span class="nt">&gt;&lt;/drink&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"ScopeAt.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"MyModule"</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'MyCtrl'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">){</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">ctrlFlavor</span><span class="o">=</span><span class="s2">"百威"</span><span class="p">;</span>
<span class="p">}])</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"drink"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span><span class="p">:</span><span class="s1">'AE'</span><span class="p">,</span>
        <span class="na">scope</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">flavor</span><span class="p">:</span> <span class="s1">'@'</span>
        <span class="p">},</span>
        <span class="na">template</span><span class="p">:</span><span class="s2">"&lt;div&gt;&lt;/div&gt;"</span><span class="p">,</span>
        <span class="cm">/*link:function(scope,element,attrs){
            scope.flavor=attrs.flavor;
        }*/</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>这样写和之前也是等价的。</p>

<p>这个是<code>@</code>绑定，有一个地方需要注意他传递的是字符串传递的不是对象</p>

<p><strong>scope  = 号的绑定</strong></p>

<p>这种绑定是双向进行绑定</p>

<p>业务是这样的dang不仅仅要把$scope上的ctrlFlavor传递给指令，当指令来修改了$scope上的ctrlFlavor的内容希望也让控制器里面的内容也发生变化，</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"MyModule"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"css/bootstrap-3.0.0/css/bootstrap.css"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">"MyCtrl"</span><span class="nt">&gt;</span>
            Ctrl:
            <span class="nt">&lt;br&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ng-model=</span><span class="s">"ctrlFlavor"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;br&gt;</span>
            Directive:
            <span class="nt">&lt;br&gt;</span>
            <span class="nt">&lt;drink</span> <span class="na">flavor=</span><span class="s">"ctrlFlavor"</span><span class="nt">&gt;&lt;/drink&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"ScopeEqual.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"MyModule"</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'MyCtrl'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">){</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">ctrlFlavor</span><span class="o">=</span><span class="s2">"百威"</span><span class="p">;</span>
<span class="p">}])</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"drink"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span><span class="p">:</span><span class="s1">'AE'</span><span class="p">,</span>
        <span class="na">scope</span><span class="p">:{</span>
            <span class="na">flavor</span><span class="p">:</span><span class="s1">'='</span>
        <span class="p">},</span>
        <span class="na">template</span><span class="p">:</span><span class="s1">'&lt;input type="text" ng-model="flavor"/&gt;'</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>通过 scope:{flavor:&#39;=&#39;},就把flavor的内容绑定到$scope.ctrlFlavor=&quot;百威&quot;;上面。</p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-002b87786e15b653.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>

<p><strong>scope  &amp; 号的绑定</strong></p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"MyModule"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"css/bootstrap-3.0.0/css/bootstrap.css"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">"MyCtrl"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;greeting</span> <span class="na">greet=</span><span class="s">"sayHello(name)"</span><span class="nt">&gt;&lt;/greeting&gt;</span>
            <span class="nt">&lt;greeting</span> <span class="na">greet=</span><span class="s">"sayHello(name)"</span><span class="nt">&gt;&lt;/greeting&gt;</span>
            <span class="nt">&lt;greeting</span> <span class="na">greet=</span><span class="s">"sayHello(name)"</span><span class="nt">&gt;&lt;/greeting&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"ScopeAnd.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>有greeting 指令，这个指令里面要调用控制器上面的方法叫sayHello</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">"MyModule"</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'MyCtrl'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">){</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">sayHello</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s2">"Hello "</span><span class="o">+</span><span class="nx">name</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}])</span>
<span class="nx">myModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">"greeting"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span><span class="p">:</span><span class="s1">'AE'</span><span class="p">,</span>
        <span class="na">scope</span><span class="p">:{</span>
            <span class="na">greet</span><span class="p">:</span><span class="s1">'&amp;'</span>
        <span class="p">},</span>
        <span class="na">template</span><span class="p">:</span><span class="s1">'&lt;input type="text" ng-model="userName" /&gt;&lt;br/&gt;'</span><span class="o">+</span>
                 <span class="s1">'&lt;button class="btn btn-default" ng-click="greet({name:userName})"&gt;Greeting&lt;/button&gt;&lt;br/&gt;'</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>js中有一个控制器，作用域上有sayHello方法，弹参数出来。</p>

<p>写了greeting指令，写了scope:{greet:&#39;&amp;&#39;},</p>

<p>在模板里面用一个按钮调用greet函数</p>

<p>这个函数在页面上绑定控制器上面的sayHello方法</p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-85a3d700eebb36dd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>

<h3>AngularJS内置的指令</h3>

<p>http://ngnice.com/  AngularJS-api</p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-0ed1c903dd25c550.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-ce0e5302ffc8b580.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">'TestFormModule'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"content-type"</span> <span class="na">content=</span><span class="s">"text/html; charset=utf-8"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"FormBasic.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;form</span> <span class="na">name=</span><span class="s">"myForm"</span> <span class="na">ng-submit=</span><span class="s">"save()"</span> <span class="na">ng-controller=</span><span class="s">"TestFormModule"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"userName"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ng-model=</span><span class="s">"user.userName"</span> <span class="na">required</span><span class="nt">/&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">ng-model=</span><span class="s">"user.password"</span> <span class="na">required</span><span class="nt">/&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">ng-disabled=</span><span class="s">"myForm.$invalid"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>

</code></pre></div><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">appModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'TestFormModule'</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">appModule</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s2">"TestFormModule"</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">){</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">user</span><span class="o">=</span><span class="p">{</span>
        <span class="na">userName</span><span class="p">:</span><span class="s1">'damoqiongqiu'</span><span class="p">,</span>
        <span class="na">password</span><span class="p">:</span><span class="s1">''</span>
    <span class="p">};</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">save</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s2">"保存数据!"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><img src="http://upload-images.jianshu.io/upload_images/3877962-973ff96722645d86.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">ng-app</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"FormAdv1.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">"Controller"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;form</span> <span class="na">name=</span><span class="s">"form"</span> <span class="na">class=</span><span class="s">"css-form"</span> <span class="na">novalidate</span><span class="nt">&gt;</span>
                Name:
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ng-model=</span><span class="s">"user.name"</span> <span class="na">name=</span><span class="s">"uName"</span> <span class="na">required</span> <span class="nt">/&gt;&lt;br/&gt;</span>
                E-mail:
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"email"</span> <span class="na">ng-model=</span><span class="s">"user.email"</span> <span class="na">name=</span><span class="s">"uEmail"</span> <span class="na">required</span> <span class="nt">/&gt;&lt;br/&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">ng-show=</span><span class="s">"form.uEmail.$dirty &amp;&amp; form.uEmail.$invalid"</span><span class="nt">&gt;</span>
                    Invalid:
                    <span class="nt">&lt;span</span> <span class="na">ng-show=</span><span class="s">"form.uEmail.$error.required"</span><span class="nt">&gt;</span>Tell us your email.<span class="nt">&lt;/span&gt;</span>
                    <span class="nt">&lt;span</span> <span class="na">ng-show=</span><span class="s">"form.uEmail.$error.email"</span><span class="nt">&gt;</span>This is not a valid email.<span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                Gender:<span class="nt">&lt;br/&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">ng-model=</span><span class="s">"user.gender"</span> <span class="na">value=</span><span class="s">"male"</span> <span class="nt">/&gt;</span>
                male
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">ng-model=</span><span class="s">"user.gender"</span> <span class="na">value=</span><span class="s">"female"</span> <span class="nt">/&gt;</span>
                female<span class="nt">&lt;br/&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">ng-model=</span><span class="s">"user.agree"</span> <span class="na">name=</span><span class="s">"userAgree"</span> <span class="na">required</span> <span class="nt">/&gt;</span>
                I agree:
                <span class="nt">&lt;input</span> <span class="na">ng-show=</span><span class="s">"user.agree"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ng-model=</span><span class="s">"user.agreeSign"</span> <span class="na">required</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">ng-show=</span><span class="s">"!user.agree || !user.agreeSign"</span><span class="nt">&gt;</span>
                    Please agree and sign.
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;br/&gt;</span>
                <span class="nt">&lt;button</span> <span class="na">ng-click=</span><span class="s">"reset()"</span> <span class="na">ng-disabled=</span><span class="s">"isUnchanged(user)"</span><span class="nt">&gt;</span>
                    RESET
                <span class="nt">&lt;/button&gt;</span>
                <span class="nt">&lt;button</span> <span class="na">ng-click=</span><span class="s">"update(user)"</span> <span class="na">ng-disabled=</span><span class="s">"form.$invalid || isUnchanged(user)"</span><span class="nt">&gt;</span>
                    SAVE
                <span class="nt">&lt;/button&gt;</span>
            <span class="nt">&lt;/form&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>

</code></pre></div><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">Controller</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">master</span> <span class="o">=</span> <span class="p">{};</span>

    <span class="nx">$scope</span><span class="p">.</span><span class="nx">update</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">master</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">$scope</span><span class="p">.</span><span class="nx">reset</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$scope</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">master</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">$scope</span><span class="p">.</span><span class="nx">isUnchanged</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">equals</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">master</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">$scope</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h3>实例解析Expander</h3>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">'expanderModule'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"content-type"</span> <span class="na">content=</span><span class="s">"text/html; charset=utf-8"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="na">href=</span><span class="s">"ExpanderSimple.css"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"ExpanderSimple.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">'SomeController'</span><span class="nt">&gt;</span>
            <span class="nt">&lt;expander</span> <span class="na">class=</span><span class="s">'expander'</span> <span class="na">expander-title=</span><span class="s">'title'</span><span class="nt">&gt;</span>

            <span class="nt">&lt;/expander&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>

</code></pre></div>
<p>定义一个控制器 ，写入expander指令，后面的expander-title=&#39;title&#39;是使用ag绑定策略来进行绑定，</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">expanderModule</span><span class="o">=</span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'expanderModule'</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">expanderModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">'expander'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span> <span class="p">:</span> <span class="s1">'EA'</span><span class="p">,</span>
        <span class="na">replace</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">transclude</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">scope</span> <span class="p">:</span> <span class="p">{</span>
            <span class="na">title</span> <span class="p">:</span> <span class="s1">'=expanderTitle'</span>
        <span class="p">},</span>
        <span class="na">template</span> <span class="p">:</span> <span class="s1">'&lt;div&gt;'</span>
                 <span class="o">+</span> <span class="s1">'&lt;div class="title" ng-click="toggle()"&gt;&lt;/div&gt;'</span>
                 <span class="o">+</span> <span class="s1">'&lt;div class="body" ng-show="showMe" ng-transclude&gt;&lt;/div&gt;'</span>
                 <span class="o">+</span> <span class="s1">'&lt;/div&gt;'</span><span class="p">,</span>
        <span class="na">link</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">showMe</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">toggle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">scope</span><span class="p">.</span><span class="nx">showMe</span> <span class="o">=</span> <span class="o">!</span><span class="nx">scope</span><span class="p">.</span><span class="nx">showMe</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="nx">expanderModule</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'SomeController'</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="s1">'点击展开'</span><span class="p">;</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="s1">'这里是内部的内容。'</span><span class="p">;</span>
<span class="p">});</span>

</code></pre></div>
<p>首先directive定义一个指令expander</p>

<p>restrict : &#39;EA&#39;,  可以用元素也可以用属性，</p>

<p>replace : true,   会替换</p>

<p>transclude : true,  内部内容是可以变换的</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">scope</span> <span class="err">:</span> <span class="p">{</span>
            <span class="nl">title</span> <span class="p">:</span> <span class="s1">'=expanderTitle'</span>
        <span class="p">},</span>
<span class="c1">//=  等于号这样一个等值绑定  绑定expanderTitle这样一个东西，</span>
</code></pre></div>
<p>这个东西就是页面上写的</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;expander</span> <span class="na">class=</span><span class="s">'expander'</span> <span class="na">expander-title=</span><span class="s">'title'</span><span class="nt">&gt;</span>

            <span class="nt">&lt;/expander&gt;</span>
</code></pre></div>
<p>template
<code>javascript
template : &#39;&lt;div&gt;&#39;
                 + &#39;&lt;div class=&quot;title&quot; ng-click=&quot;toggle()&quot;&gt;&lt;/div&gt;&#39;
                 + &#39;&lt;div class=&quot;body&quot; ng-show=&quot;showMe&quot; ng-transclude&gt;&lt;/div&gt;&#39;
                 + &#39;&lt;/div&gt;&#39;,
</code></p>

<p>template里面有一个ng-click绑定到<code>toggle()</code>这样一个方法上面，这个方法是有指令<code>link</code>这个函数里面提供出来的，很显然是指令内部去使用，外部是调取不到这个方法的，</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">link</span> <span class="err">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">showMe</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">toggle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">scope</span><span class="p">.</span><span class="nx">showMe</span> <span class="o">=</span> <span class="o">!</span><span class="nx">scope</span><span class="p">.</span><span class="nx">showMe</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
</code></pre></div>
<p>看看<code>ng-show</code></p>

<p><code>ng-show</code>是用来进行显示和隐藏的切换的，他会根据<code>showMe</code>的属性是不是为<code>true</code>来决定这个<code>div</code>到底显不显示。</p>

<p>以上是一个简单指令的例子</p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-9e39a4fc357db349.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png"></p>

<h3>Accordion</h3>

<p>css</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.expander</span> <span class="p">{</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="no">black</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">250px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.expander</span><span class="o">&gt;</span><span class="nc">.title</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="no">black</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">.1em</span> <span class="m">.3em</span><span class="p">;</span>
    <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.expander</span><span class="o">&gt;</span><span class="nc">.body</span> <span class="p">{</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">.1em</span> <span class="m">.3em</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>html</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">"expanderModule"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"content-type"</span> <span class="na">content=</span><span class="s">"text/html; charset=utf-8"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="na">href=</span><span class="s">"Accordion.css"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"framework/angular-1.3.0.14/angular.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"Accordion.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body</span> <span class="na">ng-controller=</span><span class="s">'SomeController'</span> <span class="nt">&gt;</span>
        <span class="nt">&lt;accordion&gt;</span>
            <span class="nt">&lt;expander</span> <span class="na">class=</span><span class="s">'expander'</span> <span class="na">ng-repeat=</span><span class="s">'expander in expanders'</span> <span class="na">expander-title=</span><span class="s">'expander.title'</span><span class="nt">&gt;</span>

            <span class="nt">&lt;/expander&gt;</span>
        <span class="nt">&lt;/accordion&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>这里面指令进了嵌套，外面是个<code>accordion</code>，内部是<code>expander</code>这样一个指令，<code>expander</code>使用<code>ng-repeat=&#39;expander in expanders&#39;</code>来进行迭代，他会根据<code>expanders</code>数组里面内容来决定创建多少个<code>expander</code>，</p>

<p>javascript</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">expModule</span><span class="o">=</span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'expanderModule'</span><span class="p">,[])</span>
<span class="nx">expModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">'accordion'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span> <span class="p">:</span> <span class="s1">'EA'</span><span class="p">,</span>
        <span class="na">replace</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">transclude</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">template</span> <span class="p">:</span> <span class="s1">'&lt;div ng-transclude&gt;&lt;/div&gt;'</span><span class="p">,</span>
        <span class="na">controller</span> <span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">expanders</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">gotOpened</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selectedExpander</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">angular</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">expanders</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expander</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">selectedExpander</span> <span class="o">!=</span> <span class="nx">expander</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">expander</span><span class="p">.</span><span class="nx">showMe</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">});</span>
            <span class="p">}</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">addExpander</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expander</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">expanders</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">expander</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="nx">expModule</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">'expander'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">restrict</span> <span class="p">:</span> <span class="s1">'EA'</span><span class="p">,</span>
        <span class="na">replace</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">transclude</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">require</span> <span class="p">:</span> <span class="s1">'^?accordion'</span><span class="p">,</span>
        <span class="na">scope</span> <span class="p">:</span> <span class="p">{</span>
            <span class="na">title</span> <span class="p">:</span> <span class="s1">'=expanderTitle'</span>
        <span class="p">},</span>
        <span class="na">template</span> <span class="p">:</span> <span class="s1">'&lt;div&gt;'</span>
                  <span class="o">+</span> <span class="s1">'&lt;div class="title" ng-click="toggle()"&gt;&lt;/div&gt;'</span>
                  <span class="o">+</span> <span class="s1">'&lt;div class="body" ng-show="showMe" ng-transclude&gt;&lt;/div&gt;'</span>
                  <span class="o">+</span> <span class="s1">'&lt;/div&gt;'</span><span class="p">,</span>
        <span class="na">link</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">,</span> <span class="nx">accordionController</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">showMe</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">accordionController</span><span class="p">.</span><span class="nx">addExpander</span><span class="p">(</span><span class="nx">scope</span><span class="p">);</span>
            <span class="nx">scope</span><span class="p">.</span><span class="nx">toggle</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">toggle</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">scope</span><span class="p">.</span><span class="nx">showMe</span> <span class="o">=</span> <span class="o">!</span><span class="nx">scope</span><span class="p">.</span><span class="nx">showMe</span><span class="p">;</span>
                <span class="nx">accordionController</span><span class="p">.</span><span class="nx">gotOpened</span><span class="p">(</span><span class="nx">scope</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="nx">expModule</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s2">"SomeController"</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">expanders</span> <span class="o">=</span> <span class="p">[{</span>
        <span class="na">title</span> <span class="p">:</span> <span class="s1">'Click me to expand'</span><span class="p">,</span>
        <span class="na">text</span> <span class="p">:</span> <span class="s1">'Hi there folks, I am the content that was hidden but is now shown.'</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="na">title</span> <span class="p">:</span> <span class="s1">'Click this'</span><span class="p">,</span>
        <span class="na">text</span> <span class="p">:</span> <span class="s1">'I am even better text than you have seen previously'</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="na">title</span> <span class="p">:</span> <span class="s1">'Test'</span><span class="p">,</span>
        <span class="na">text</span> <span class="p">:</span> <span class="s1">'test'</span>
    <span class="p">}];</span>
<span class="p">});</span>

</code></pre></div>
<p><code>expander</code>指令中<code>require : &#39;^?accordion&#39;,</code>依赖外部的<code>accordion</code>，</p>

<p>在<code>link</code>里面就能接收到第四个参数<code>accordionController</code></p>

<p>通过参数<code>accordionController</code>就可以跟外层的指令来进行一些交互，</p>

<p><code>accordion</code>里面通过<code>controller</code>暴露了一些方法出来，</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">controller</span> <span class="err">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">expanders</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">gotOpened</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selectedExpander</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">angular</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">expanders</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expander</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">selectedExpander</span> <span class="o">!=</span> <span class="nx">expander</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">expander</span><span class="p">.</span><span class="nx">showMe</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">});</span>
            <span class="p">}</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">addExpander</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expander</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">expanders</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">expander</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
</code></pre></div>
<p>这样<code>expander</code>就能通过<code>accordionController</code>来调用</p>

<p>效果</p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-638cd88811aec914.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png"></p>

<p>第三方指令库，借助指令库加强开发速度</p>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-e8904a53139d1d0d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png"></p>

<h3>指令的运行原理：compile和link</h3>

<h3>总结：ERP类型的系统必备的UI组件</h3>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-bac8e6bd7b9951d0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png"></p>

<p>http://miniui.com/</p>

<h3>总结：互联网/电商型系统必备的UI组件</h3>

<p><img src="http://upload-images.jianshu.io/upload_images/3877962-186853cf895f76bf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png"></p>

<h3>第三方指令库angular-ui</h3>

<h3>Directive思想的起源和原理概述</h3>

              <!-- 多说评论框 start -->
              		<!-- <span class="ds-thread-count" data-thread-key="/angularjs/2017/03/11/angularjs_basics8" data-count-type="comments"></span> -->
					<div class="ds-thread" data-thread-key="http://www.huanghanlian.com/angularjs/2017/03/11/angularjs_basics8" data-title="基本概念和用法-指令 2-6" data-url="http://www.huanghanlian.com/angularjs/2017/03/11/angularjs_basics8"></div>
				<!-- 多说评论框 end -->
				<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
				<script type="text/javascript">
				var duoshuoQuery = {short_name:"huanghuanlian"};
					(function() {
						var ds = document.createElement('script');
						ds.type = 'text/javascript';ds.async = true;
						ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
						ds.charset = 'UTF-8';
						(document.getElementsByTagName('head')[0]
						 || document.getElementsByTagName('body')[0]).appendChild(ds);
					})();
				</script>
				<!-- 多说公共JS代码 end -->


				
            </article>
		</article>

	</main>
	<div class="sidebar" id="sidebar">
	<div class="sidebar-top">
		<aside class="widjhuh">
			<h3 class="widget-title">最新文章</h3>
			<ul class="minty_thumblist">
				
                  <li>
                    <a href="/php/2017/03/13/php-study1.html">

                    	<span>PHP进阶-数组(1)</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/angularjs/2017/03/11/angularjs-basics10.html">

                    	<span>基本概念和用法-综合应用BookStore  2-8</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/angularjs/2017/03/11/angularjs-basics9.html">

                    	<span>基本概念和用法-Service与Peovider  2-7</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/angularjs/2017/03/11/angularjs-basics7.html">

                    	<span>基本概念和用法-路由 2-5</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/angularjs/2017/03/11/angularjs-basics6.html">

                    	<span>基本概念和用法-双向数据绑定 2-4</span>
                    </a>
                  </li>
				
                  <li>
                    <a href="/angularjs/2017/03/11/angularjs-basics5.html">

                    	<span>基本概念和用法-路由，模块，依赖注入 2-3</span>
                    </a>
                  </li>
				
			</ul>
		</aside>
	</div>

	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">最近访客</h3>
			<ul class="minty_thumblist minty_thumblist_a ds-recent-visitors visitorsopi" data-num-items="20" data-avatar-size="38">

			</ul>

		    <!--多说js加载开始，一个页面只需要加载一次 -->
		    <script type="text/javascript">
		    var duoshuoQuery = {short_name:"huanghuanlian"};
		    (function() {
		        var ds = document.createElement('script');
		        ds.type = 'text/javascript';ds.async = true;
		        ds.src = 'http://static.duoshuo.com/embed.js';
		        ds.charset = 'UTF-8';
		        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
		    })();
		    </script>
		    <!--多说js加载结束，一个页面只需要加载一次 -->

		</aside>
	</div>

	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">分类目录</h3>
			<ul class="minty_thumblist minty_thumblist_a">
				
				<li>
					<a href="/categories/Markdown/" title="view all
posts">
						Markdown (2)
					</a>
				</li>
				
				<li>
					<a href="/categories/Canvas/" title="view all
posts">
						Canvas (1)
					</a>
				</li>
				
				<li>
					<a href="/categories/Git/" title="view all
posts">
						Git (1)
					</a>
				</li>
				
				<li>
					<a href="/categories/JavaScript/" title="view all
posts">
						JavaScript (30)
					</a>
				</li>
				
				<li>
					<a href="/categories/AngularJS/" title="view all
posts">
						AngularJS (10)
					</a>
				</li>
				
				<li>
					<a href="/categories/PHP/" title="view all
posts">
						PHP (1)
					</a>
				</li>
				
			</ul>
		</aside>
	</div>


	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">标签目录</h3>
			<div class="tagcloud" id="tagcloud">
				
					<a href="/tag/Markdown/" title="view all
posts">
						Markdown
					</a>
				
					<a href="/tag/Canvas/" title="view all
posts">
						Canvas
					</a>
				
					<a href="/tag/Git/" title="view all
posts">
						Git
					</a>
				
					<a href="/tag/JavaScript/" title="view all
posts">
						JavaScript
					</a>
				
					<a href="/tag/RegExp/" title="view all
posts">
						RegExp
					</a>
				
					<a href="/tag/DOM/" title="view all
posts">
						DOM
					</a>
				
					<a href="/tag/BOM/" title="view all
posts">
						BOM
					</a>
				
					<a href="/tag/proto/" title="view all
posts">
						proto
					</a>
				
					<a href="/tag/Ajax/" title="view all
posts">
						Ajax
					</a>
				
					<a href="/tag/AngularJS/" title="view all
posts">
						AngularJS
					</a>
				
					<a href="/tag/PHP_study/" title="view all
posts">
						PHP_study
					</a>
				
			</div>

		</aside>
	</div>

	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">友情链接</h3>
			<ul class="minty_thumblist minty_thumblist_a">

				<li>
					<a href="http://blog.csdn.net/u013861109?viewmode=contents" target="blank">
						csdn博客
					</a>
				</li>
				<li>
					<a href="http://www.imooc.com/" target="blank">
						慕课网
					</a>
				</li>
				<li>
					<a href="http://www.dglives.com/" target="blank">
						数字生活前端
					</a>
				</li>
				<li>
					<a href="http://www.jianshu.com/" target="blank">
						简书
					</a>
				</li>
				<li>
					<a href="http://www.runoob.com/" target="blank">
						菜鸟
					</a>
				</li>
				<li>
					<a href="http://www.qdfuns.com/" target="blank">
						前端网
					</a>
				</li>
			</ul>
		</aside>
	</div>

	<div class="sidebar-top">
		<aside class="widjhuh clearfix">
			<h3 class="widget-title">QQ交流群</h3>
			<img style="margin-top: 10px; box-shadow: none;" src="/assets/images/ertw.png">
		</aside>
	</div>


	<script>
	var box=document.getElementById("tagcloud").getElementsByTagName("a");
	for(var i=0;i<box.length;i++){
		var a =Math.round(Math.random()*20)/10;
		box[i].style.fontSize=a+'em';
	}
	</script>

</div>
</div>
	
<footer id="footer">
	<nav class="links">
		<a href="">作品</a>
		<a href="/about/">关于本站</a>
		<a href="/report/">留言板</a>
	</nav>
	<div class="copyright">
		© 2016 <a href="">继小鹏的前端博客</a>
	</div>
	<a href="javascript:pageScroll();" id="rocket" class=""></a>
	<span id="busuanzi_container_site_pv">
	    本站总访问量<span id="busuanzi_value_site_pv"></span>次
	</span>
	<span id="busuanzi_container_site_uv">
	  本站访客数<span id="busuanzi_value_site_uv"></span>人次
	</span>
</footer>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script>

$(function(){
	$("#m-btns").click(function(){
		if($("body").hasClass('nav-is-open')){
			$("body").removeClass('nav-is-open')
		}else{
			$("body").addClass('nav-is-open')
		};
	})
})
var fhdb = document.getElementById("rocket");

//获取页面可视区高度
var dqy = document.documentElement.clientHeight;

var main_left=$('#main').offset().left+$('#main').width()+16;

//滚动条滚动时触发   在滚动的时候触发
window.onscroll = function() {
	var sTop = document.documentElement.scrollTop || document.body.scrollTop;
	if (sTop >= dqy) {
		$("#rocket").addClass('show');
	} else {
		$("#rocket").removeClass('show');
	}
}

function pageScroll() {
	//把内容滚动指定的像素数（第一个参数是向右滚动的像素数，第二个参数是向下滚动的像素数）
	window.scrollBy(0, -100);
	//延时递归调用，模拟滚动向上效果
	scrolldelay = setTimeout('pageScroll()', 5);
	//获取scrollTop值，声明了DTD的标准网页取document.documentElement.scrollTop，否则取document.body.scrollTop；因为二者只有一个会生效，另一个就恒为0，所以取和值可以得到网页的真正的scrollTop值
	var sTop = document.documentElement.scrollTop + document.body.scrollTop;
	//判断当页面到达顶部，取消延时代码（否则页面滚动到顶部会无法再向下正常浏览页面）
	if (sTop == 0) clearTimeout(scrolldelay)

}



</script>
</body>
</html>